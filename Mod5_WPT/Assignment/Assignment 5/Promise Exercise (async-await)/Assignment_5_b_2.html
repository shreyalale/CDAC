<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Asynchronous Programming in JavaScript</h1>
    <i>Promise exercise (async-await):
    </i>
    <h3>Q2. Asynchronous Fetching with Promises in JavaScript</h3>
    
    <script>
        const fetchFast = () => {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      resolve("Fast Done!");
    }, 2000);
  });
};
//6
const fetchSlow = () => {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      resolve("Slow Done!");
    }, 6000);
  });
};

console.log("Program starting...");
const firstTimestamp = new Date();

const useData = async () => {
  const fastResult = fetchFast();
  console.log(fastResult);
  // ??
  const slowResult = fetchSlow();
  console.log(slowResult);

  const result = await Promise.all([fastResult, slowResult]);
  console.log(result);

  const secondTimestamp = new Date();
  const timeElapsed = secondTimestamp - firstTimestamp;
  console.log("Program complete!", timeElapsed);
};

useData();
    </script>

    <hr>
    <h3>Q3. Candy Fetching and Selling Simulation with Promises in JavaScript</h3>
    <script>
      const goGetCandies = () => {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      resolve({ candy: "sour keys", quantity: 10 });
    }, 2000);
  });
};

const sellCandies = (candy) => {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      resolve(25 * candy.quantity);
    }, 3000);
  });
};

const useCandies = async () => {
  const candy = await goGetCandies();
  const result = await sellCandies(candy);

  console.log(result);
  const time2 = new Date();
  console.log(`${time2 - time1}ms passed`);
};

console.log("Program starting");
const time1 = new Date();

const candy = goGetCandies();
candy.then((result) => {
  const sellValue = sellCandies(result);
  console.log(sellValue);
  sellValue.then((value) => {
    console.log(value);
    const time2 = new Date();
    console.log(`${time2 - time1}ms passed`);
  });
});
console.log("Program complete");
    </script>
</body>
</html>